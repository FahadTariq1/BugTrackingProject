{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5e504f0c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"bug-details\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"heading-row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"heading-item\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Details:\")]), /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"heading-item\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Developer:\")]), /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"heading-item\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Status:\")])], -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"bug-item-details\"\n};\nconst _hoisted_5 = {\n  class: \"bug-item-developer\"\n};\nconst _hoisted_6 = {\n  class: \"bug-item-status\"\n};\nconst _hoisted_7 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"New\"\n}, \"New\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"In Progress\"\n}, \"In Progress\", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"Resolved\"\n}, \"Resolved\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"Closed\"\n}, \"Closed\", -1 /* HOISTED */));\nconst _hoisted_12 = [_hoisted_8, _hoisted_9, _hoisted_10, _hoisted_11];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-ellipsis-v\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  key: 0,\n  class: \"dropdown-menu\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = {\n  key: 1,\n  class: \"no-bugs-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.bugs.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.bugs, (bug, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"bug-item\",\n      key: bug.id\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, _toDisplayString(bug.description), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, _toDisplayString(bug.developer_name), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => bug.status = $event,\n      onChange: $event => $options.changeStatus(bug, bug.status)\n    }, [..._hoisted_12], 40 /* PROPS, NEED_HYDRATION */, _hoisted_7), [[_vModelSelect, bug.status]])]), _createElementVNode(\"button\", {\n      onClick: $event => $options.toggleDropdown(index)\n    }, [..._hoisted_15], 8 /* PROPS */, _hoisted_13), $data.activeDropdown === index ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteBug(bug)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_17)])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, \" No bugs available for this project. \"))]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","value","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_14","_createElementBlock","_hoisted_1","$data","bugs","length","_hoisted_2","_hoisted_3","_Fragment","_renderList","bug","index","id","_hoisted_4","_toDisplayString","description","_hoisted_5","developer_name","_hoisted_6","$event","status","onChange","$options","changeStatus","_hoisted_12","_hoisted_7","onClick","toggleDropdown","_hoisted_15","_hoisted_13","activeDropdown","_hoisted_16","deleteBug","_hoisted_17","_createCommentVNode","_hoisted_18"],"sources":["/home/ali/BugTrackerProject/Frontend/bugtrackingfrontend/src/components/SingleBug.vue"],"sourcesContent":["<template>\n  <div class=\"bug-details\">\n    <div v-if=\"bugs.length\">\n      <div class=\"heading-row\">\n        <div class=\"heading-item\"><strong>Details:</strong></div>\n        <div class=\"heading-item\"><strong>Developer:</strong></div>\n        <div class=\"heading-item\"><strong>Status:</strong></div>\n      </div>\n      <div class=\"bug-item\" v-for=\"(bug, index) in bugs\" :key=\"bug.id\">\n        <div class=\"bug-item-details\">\n          <p>{{ bug.description }}</p>\n        </div>\n        <div class=\"bug-item-developer\">\n          <p>{{ bug.developer_name }}</p>\n        </div>\n        <div class=\"bug-item-status\">\n          <select v-model=\"bug.status\" @change=\"changeStatus(bug, bug.status)\">\n            <option value=\"New\">New</option>\n            <option value=\"In Progress\">In Progress</option>\n            <option value=\"Resolved\">Resolved</option>\n            <option value=\"Closed\">Closed</option>\n          </select>\n        </div>\n        <button @click=\"toggleDropdown(index)\">\n          <i class=\"fas fa-ellipsis-v\"></i>\n        </button>\n        <div v-if=\"activeDropdown === index\" class=\"dropdown-menu\">\n          <button @click=\"deleteBug(bug)\">Delete</button>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"no-bugs-message\">\n      No bugs available for this project.\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: \"SingleBug\",\n  props: {\n    project_id: {\n      type: String,\n      required: true\n    },\n    searchQuery: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      bugs: [], // Array to store all bugs\n      activeDropdown: null // To track which dropdown is active\n    };\n  },\n  watch: {\n    searchQuery: 'fetchBugData'\n  },\n  mounted() {\n    console.log('Received Project ID in SingleBug:', this.project_id);\n    this.fetchBugData();\n  },\n  methods: {\n    async fetchBugData() {\n      try {\n        const response = await axios.get('http://localhost:8000/Bugs/searchbug/', {\n          params: {\n            bug_project_id: this.project_id,\n            bug_description: this.searchQuery // Pass the search query\n          }\n        });\n        console.log('API Response:', response.data);\n        this.bugs = response.data;\n      } catch (error) {\n        console.error('Error fetching bug data:', error);\n      }\n    },\n    toggleDropdown(index) {\n      this.activeDropdown = this.activeDropdown === index ? null : index;\n    },\n    async changeStatus(bug, status) {\n      try {\n        await axios.patch(`http://localhost:8000/Bugs/update/${bug.id}/`, {\n          status: status\n        }, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        console.log('Bug status updated:', status);\n      } catch (error) {\n        console.error('Error updating bug status:', error);\n      }\n    },\n    async deleteBug(bug) {\n      try {\n        await axios.delete(`http://localhost:8000/Bugs/delete/${bug.id}/`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        console.log('Bug deleted:', bug.id);\n        this.fetchBugData(); // Refresh the bug list\n      } catch (error) {\n        console.error('Error deleting bug:', error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.bug-details {\n  margin-top: 20px;\n}\n\n.heading-row {\n  display: flex;\n  justify-content: space-between;\n  font-weight: bold;\n}\n\n.heading-item {\n  width: 30%;\n  text-align: center;\n}\n\n.bug-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.bug-item-details {\n  width: 40%;\n}\n\n.bug-item-developer {\n  width: 30%;\n}\n\n.bug-item-status {\n  width: 20%;\n}\n\n.dropdown-menu {\n  position: absolute;\n  background-color: white;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  padding: 10px;\n  right: 0;\n}\n\n.no-bugs-message {\n  margin-top: 20px;\n  font-size: 18px;\n  color: gray;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAa;;EAD1BC,GAAA;AAAA;gEAGMC,mBAAA,CAIM;EAJDF,KAAK,EAAC;AAAa,I,aACtBE,mBAAA,CAAyD;EAApDF,KAAK,EAAC;AAAc,I,aAACE,mBAAA,CAAyB,gBAAjB,UAAQ,E,gBAC1CA,mBAAA,CAA2D;EAAtDF,KAAK,EAAC;AAAc,I,aAACE,mBAAA,CAA2B,gBAAnB,YAAU,E,gBAC5CA,mBAAA,CAAwD;EAAnDF,KAAK,EAAC;AAAc,I,aAACE,mBAAA,CAAwB,gBAAhB,SAAO,E;;EAGpCF,KAAK,EAAC;AAAkB;;EAGxBA,KAAK,EAAC;AAAoB;;EAG1BA,KAAK,EAAC;AAAiB;mBAfpC;gEAiBYE,mBAAA,CAAgC;EAAxBC,KAAK,EAAC;AAAK,GAAC,KAAG;gEACvBD,mBAAA,CAAgD;EAAxCC,KAAK,EAAC;AAAa,GAAC,aAAW;iEACvCD,mBAAA,CAA0C;EAAlCC,KAAK,EAAC;AAAU,GAAC,UAAQ;iEACjCD,mBAAA,CAAsC;EAA9BC,KAAK,EAAC;AAAQ,GAAC,QAAM;qBAH7BC,UAAgC,EAChCC,UAAgD,EAChDC,WAA0C,EAC1CC,WAAsC,C;oBApBlD;iEAwBUL,mBAAA,CAAiC;EAA9BF,KAAK,EAAC;AAAmB;qBAA5BQ,WAAiC,C;;EAxB3CP,GAAA;EA0B6CD,KAAK,EAAC;;oBA1BnD;;EAAAC,GAAA;EA+BgBD,KAAK,EAAC;;;uBA9BpBS,mBAAA,CAiCM,OAjCNC,UAiCM,GAhCOC,KAAA,CAAAC,IAAI,CAACC,MAAM,I,cAAtBJ,mBAAA,CA4BM,OA9BVK,UAAA,GAGMC,UAIM,G,kBACNN,mBAAA,CAqBMO,SAAA,QA7BZC,WAAA,CAQmDN,KAAA,CAAAC,IAAI,EARvD,CAQoCM,GAAG,EAAEC,KAAK;yBAAxCV,mBAAA,CAqBM;MArBDT,KAAK,EAAC,UAAU;MAA+BC,GAAG,EAAEiB,GAAG,CAACE;QAC3DlB,mBAAA,CAEM,OAFNmB,UAEM,GADJnB,mBAAA,CAA4B,WAAAoB,gBAAA,CAAtBJ,GAAG,CAACK,WAAW,iB,GAEvBrB,mBAAA,CAEM,OAFNsB,UAEM,GADJtB,mBAAA,CAA+B,WAAAoB,gBAAA,CAAzBJ,GAAG,CAACO,cAAc,iB,GAE1BvB,mBAAA,CAOM,OAPNwB,UAOM,G,gBANJxB,mBAAA,CAKS;MArBnB,uBAAAyB,MAAA,IAgB2BT,GAAG,CAACU,MAAM,GAAAD,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEG,QAAA,CAAAC,YAAY,CAACb,GAAG,EAAEA,GAAG,CAACU,MAAM;OAhB5E,IAAAI,WAAA,mCAAAC,UAAA,I,gBAgB2Bf,GAAG,CAACU,MAAM,E,KAO7B1B,mBAAA,CAES;MAFAgC,OAAK,EAAAP,MAAA,IAAEG,QAAA,CAAAK,cAAc,CAAChB,KAAK;OAvB5C,IAAAiB,WAAA,kBAAAC,WAAA,GA0BmB1B,KAAA,CAAA2B,cAAc,KAAKnB,KAAK,I,cAAnCV,mBAAA,CAEM,OAFN8B,WAEM,GADJrC,mBAAA,CAA+C;MAAtCgC,OAAK,EAAAP,MAAA,IAAEG,QAAA,CAAAU,SAAS,CAACtB,GAAG;OAAG,QAAM,iBA3BhDuB,WAAA,E,KAAAC,mBAAA,e;qDA+BIjC,mBAAA,CAEM,OAFNkC,WAEM,EAF8B,uCAEpC,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}